/**
 * ============================================================================
 * íŒŒì¼ëª…: main.ts
 * íŒ¨í‚¤ì§€: @erp/storybook
 * ê²½ë¡œ: packages/storybook/.storybook/main.ts
 * ìž‘ì„±ì¼: 2025-12-19
 * ============================================================================
 *
 * [ðŸ“„ íŒŒì¼ ì„¤ëª…]
 * Storybook ë©”ì¸ ì„¤ì • íŒŒì¼ìž…ë‹ˆë‹¤.
 * ìŠ¤í† ë¦¬ íŒŒì¼ ê²½ë¡œ, ì• ë“œì˜¨, í”„ë ˆìž„ì›Œí¬ ì„¤ì •ì„ ì •ì˜í•©ë‹ˆë‹¤.
 *
 * [ðŸŽ¯ ì£¼ìš” ê¸°ëŠ¥]
 * 1. ìŠ¤í† ë¦¬ íŒŒì¼ ê²½ë¡œ ì„¤ì • (stories í´ë”)
 * 2. ì ‘ê·¼ì„± í…ŒìŠ¤íŠ¸ ì• ë“œì˜¨ (@storybook/addon-a11y)
 * 3. Next.js í”„ë ˆìž„ì›Œí¬ í†µí•©
 * 4. TypeScript ì§€ì›
 *
 * [ðŸ“¦ ì• ë“œì˜¨ ëª©ë¡]
 * - @storybook/addon-essentials: ê¸°ë³¸ í•„ìˆ˜ ì• ë“œì˜¨ (Controls, Actions, Docs ë“±)
 * - @storybook/addon-a11y: WCAG ì ‘ê·¼ì„± ìžë™ í…ŒìŠ¤íŠ¸
 * - @storybook/addon-interactions: ì¸í„°ëž™ì…˜ í…ŒìŠ¤íŠ¸
 * - @storybook/addon-links: ìŠ¤í† ë¦¬ ê°„ ë§í¬
 * ============================================================================
 */

import type { StorybookConfig } from '@storybook/react-webpack5';
import path from 'path';

const config: StorybookConfig = {
    // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    // ìŠ¤í† ë¦¬ íŒŒì¼ ê²½ë¡œ
    // stories í´ë” ë‚´ì˜ ëª¨ë“  .stories.tsx íŒŒì¼ì„ ëŒ€ìƒìœ¼ë¡œ í•©ë‹ˆë‹¤.
    // - Tokens/: ìƒ‰ìƒ, íƒ€ì´í¬ê·¸ëž˜í”¼, ê°„ê²© ë“± ë””ìžì¸ í† í°
    // - Components/: Button, Input, Card ë“± UI ì»´í¬ë„ŒíŠ¸
    // - Accessibility/: ì ‘ê·¼ì„± ê´€ë ¨ ìŠ¤í† ë¦¬
    // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    stories: ['../stories/**/*.mdx', '../stories/**/*.stories.@(js|jsx|mjs|ts|tsx)'],

    // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    // ì• ë“œì˜¨ ì„¤ì •
    // ê³µê³µê¸°ê´€ ERP ì‹œìŠ¤í…œì—ì„œ í•„ìˆ˜ì¸ ì ‘ê·¼ì„± í…ŒìŠ¤íŠ¸(addon-a11y)ë¥¼ í¬í•¨í•©ë‹ˆë‹¤.
    // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    addons: [
        '@storybook/addon-links',
        '@storybook/addon-essentials',
        '@storybook/addon-interactions',
        '@storybook/addon-a11y', // ì ‘ê·¼ì„± í…ŒìŠ¤íŠ¸ (WCAG 2.1 AA í•„ìˆ˜)
    ],

    // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    // í”„ë ˆìž„ì›Œí¬ ì„¤ì •
    // React + Webpack5 ì‚¬ìš© (ì•ˆì •ì„± í™•ë³´ë¥¼ ìœ„í•´ Next.js í†µí•© ëŒ€ì‹  ìˆœìˆ˜ React ì‚¬ìš©)
    // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    framework: {
        name: '@storybook/react-webpack5',
        options: {},
    },

    // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    // ìžë™ ë¬¸ì„œ ìƒì„±
    // ì»´í¬ë„ŒíŠ¸ì˜ Propsë¥¼ ìžë™ìœ¼ë¡œ ë¬¸ì„œí™”í•©ë‹ˆë‹¤.
    // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    docs: {
        autodocs: 'tag',
    },

    // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    // ì •ì  íŒŒì¼ ê²½ë¡œ
    // public í´ë”ì˜ ì •ì  íŒŒì¼ì„ ì œê³µí•©ë‹ˆë‹¤.
    // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    staticDirs: ['../public'],

    // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    // TypeScript ì„¤ì •
    // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    typescript: {
        check: false, // ë©”ëª¨ë¦¬ ë¬¸ì œ ë°©ì§€ë¥¼ ìœ„í•´ ë¹„í™œì„±í™”
        reactDocgen: 'react-docgen-typescript',
    },

    // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    // Webpack ì„¤ì •
    // @erp/ui íŒ¨í‚¤ì§€ë¥¼ ì˜¬ë°”ë¥´ê²Œ í•´ì„í•˜ê¸° ìœ„í•œ alias ì„¤ì •
    // â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    webpackFinal: async (config) => {
        // TypeScript ì²˜ë¦¬ë¥¼ ìœ„í•œ Babel Loader ê·œì¹™ ì¶”ê°€
        config.module?.rules?.push({
            test: /\.(ts|tsx)$/,
            exclude: /node_modules/,
            use: [
                {
                    loader: 'babel-loader',
                    options: {
                        presets: [
                            '@babel/preset-env',
                            ['@babel/preset-react', { runtime: 'automatic' }],
                            '@babel/preset-typescript',
                        ],
                    },
                },
            ],
        });

        // @erp/ui alias ì„¤ì •
        if (config.resolve) {
            config.resolve.alias = {
                ...config.resolve.alias,
                '@erp/ui': path.resolve(__dirname, '../../ui/src'),
                'next/image': path.resolve(__dirname, './mocks/next-image.tsx'),
            };
        }

        return config;
    },
};

export default config;
