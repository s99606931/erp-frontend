# 공공기관 ERP SaaS UI/UX 고도화 PRD

> **문서 버전**: 1.0  
> **작성일**: 2025-12-20  
> **목적**: VS Code 수준의 생산성과 현대적 UX를 제공하는 공공기관 ERP 시스템 고도화  
> **대상 독자**: 프론트엔드 개발자, UI/UX 디자이너, 프로젝트 관리자

---

## 목차

1. [개요](#1-개요)
2. [핵심 목표](#2-핵심-목표)
3. [윈도우 시스템 (Window Management)](#3-윈도우-시스템-window-management)
4. [패널 크기 조정 시스템](#4-패널-크기-조정-시스템)
5. [드래그 앤 드롭](#5-드래그-앤-드롭)
6. [커맨드 팔레트](#6-커맨드-팔레트)
7. [AI 어시스턴트 패널](#7-ai-어시스턴트-패널)
8. [키보드 기능](#8-키보드-기능)
9. [마우스오버 및 인터랙션](#9-마우스오버-및-인터랙션)
10. [유동적 레이아웃](#10-유동적-레이아웃)
11. [모던 디자인 시스템](#11-모던-디자인-시스템)
12. [기술 스택 (2025년 12월 최신)](#12-기술-스택-2025년-12월-최신)
13. [구현 로드맵](#13-구현-로드맵)
14. [성능 지표](#14-성능-지표)

---

## 1. 개요

### 1.1 현재 상황

기존 공공기관 ERP 시스템은 단순한 웹 페이지 기반 UI로, 전문 업무용 애플리케이션에 요구되는 고급 사용자 경험을 제공하지 못합니다.

### 1.2 목표

**"웹 브라우저에서 데스크탑 애플리케이션 수준의 UX 제공"**

VS Code, Figma, Notion과 같은 현대적 애플리케이션의 UX 패턴을 공공기관 ERP에 적용하여:

- ✅ 멀티 윈도우/탭 관리로 병렬 업무 처리
- ✅ 패널 크기 조정으로 사용자별 최적 레이아웃
- ✅ 드래그 앤 드롭으로 직관적 데이터 조작
- ✅ 커맨드 팔레트로 빠른 명령 실행
- ✅ 풍부한 키보드 단축키 지원
- ✅ 세련되고 현대적인 디자인

---

## 2. 핵심 목표

### 2.1 사용자 경험 향상 목표

| 지표 | 현재 | 목표 | 측정 방법 |
|------|------|------|----------|
| 업무 전환 클릭 수 | 5회 | 2회 | 서비스 간 이동 클릭 추적 |
| 레이아웃 커스터마이징 | 불가능 | 무제한 | 사용자별 레이아웃 수 |
| 키보드 전용 작업률 | 20% | 80% | 마우스 없이 완료 가능한 작업 비율 |
| 명령 실행 시간 | 5초 | 1초 | 커맨드 팔레트로 메뉴 실행 시간 |

### 2.2 대상 사용자 시나리오

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         일반 공무원 (이과장)                              │
├─────────────────────────────────────────────────────────────────────────┤
│ 📋 시나리오: 예산안 작성 중 인사 정보 확인                                  │
│                                                                         │
│ [Before] 예산 화면 → 메뉴 이동 → 인사 화면 → 정보 확인 → 다시 예산 화면      │
│          (페이지 새로고침 5회, 입력 데이터 손실 위험)                        │
│                                                                         │
│ [After]  예산 창 + 인사 창 분할 뷰로 동시 작업                              │
│          (드래그로 창 정렬, 데이터 복사/붙여넣기, 작업 상태 유지)             │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 3. 윈도우 시스템 (Window Management)

### 3.1 탭 기반 워크스페이스

VS Code의 편집기 탭처럼 여러 업무 화면을 탭으로 관리:

```
┌─────────────────────────────────────────────────────────────────────────┐
│ [Header]                                                                │
├────────────────┬────────────────────────────────────────────────────────┤
│ [Sidebar]      │ ┌─────────────────────────────────────────────────────┐│
│                │ │ [Tab1: 예산안] [Tab2: 인사카드] [Tab3: 결재함] [+]   ││
│                │ ├─────────────────────────────────────────────────────┤│
│                │ │                                                     ││
│                │ │          Active Tab Content                         ││
│                │ │                                                     ││
│                │ └─────────────────────────────────────────────────────┘│
└────────────────┴────────────────────────────────────────────────────────┘
```

| 기능 | 설명 | 단축키 |
|------|------|--------|
| 새 탭 열기 | 현재 메뉴를 새 탭으로 | `Ctrl + T` |
| 탭 닫기 | 현재 탭 닫기 | `Ctrl + W` |
| 탭 전환 | 다음/이전 탭 | `Ctrl + Tab` / `Ctrl + Shift + Tab` |
| 탭 이동 | 드래그로 순서 변경 | 드래그 |
| 탭 분리 | 새 윈도우로 분리 | 더블클릭 또는 드래그 아웃 |

### 3.2 분할 뷰 (Split View)

하나의 화면을 여러 패널로 분할:

```
┌───────────────────────┬───────────────────────┐
│                       │                       │
│    예산안 편집         │    참조 데이터        │
│    (Primary)          │    (Secondary)        │
│                       │                       │
├───────────────────────┼───────────────────────┤
│                       │                       │
│    인사 정보           │    급여 명세          │
│    (Tertiary)         │    (Quaternary)       │
│                       │                       │
└───────────────────────┴───────────────────────┘
```

| 기능 | 설명 | 단축키/동작 |
|------|------|------------|
| 수평 분할 | 좌우로 패널 분할 | `Ctrl + \` |
| 수직 분할 | 상하로 패널 분할 | `Ctrl + Shift + \` |
| 패널 최대화 | 활성 패널을 전체화면으로 | `Ctrl + Shift + M` |
| 패널 복원 | 분할 뷰로 복원 | `Ctrl + Shift + M` (토글) |
| 모든 패널 닫기 | 단일 뷰로 복귀 | `Ctrl + Shift + W` |

### 3.3 플로팅 윈도우 (Floating Windows)

데스크탑 애플리케이션처럼 자유롭게 이동 가능한 윈도우:

```
┌─────────────────────────────────────────────────────────────────────────┐
│ [Main Content]                                                          │
│                     ┌───────────────────────────┐                       │
│                     │ [Floating Window]         │                       │
│                     │ ┌───────────────────────┐ │                       │
│                     │ │ 제목      ─ □ ✕     │ │                       │
│                     │ ├───────────────────────┤ │                       │
│                     │ │                       │ │                       │
│                     │ │   팝업 내용           │ │                       │
│                     │ │                       │ │                       │
│                     │ └───────────────────────┘ │                       │
│                     └───────────────────────────┘                       │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

| 기능 | 설명 |
|------|------|
| 드래그 이동 | 타이틀 바를 드래그하여 자유롭게 이동 |
| 리사이즈 | 모서리/테두리 드래그로 크기 조정 |
| 최소화 | 작업 표시줄로 최소화 |
| 최대화 | 전체 콘텐츠 영역으로 확장 |
| 스냅 | 화면 가장자리로 드래그 시 절반 크기로 스냅 |
| 항상 위 | 다른 윈도우 위에 고정 (선택적) |

### 3.4 윈도우 상태 저장

| 저장 항목 | 설명 |
|----------|------|
| 탭 목록 | 열린 탭의 URL 및 순서 |
| 분할 레이아웃 | 패널 분할 구조 및 크기 비율 |
| 플로팅 윈도우 | 위치, 크기, 최소화 상태 |
| 스크롤 위치 | 각 탭별 스크롤 위치 |

> [!IMPORTANT]
> 모든 레이아웃 상태는 `localStorage` + 서버 동기화로 기기 간 유지됩니다.

---

## 4. 패널 크기 조정 시스템

### 4.1 리사이저블 패널

VS Code의 사이드바/에디터처럼 드래그로 크기 조정:

```
┌────────┬─────────────────────────────────┬────────┐
│        │                                 │        │
│ 사이드 ◄───► 메인 콘텐츠                 ◄───► 세부 │
│ 240px  │  (유동)                         │ 300px  │
│        │                                 │        │
│        │                                 │        │
└────────┴─────────────────────────────────┴────────┘
           ↕ 드래그 핸들 (양방향 화살표)
```

### 4.2 리사이저 핸들 디자인

```css
/* 리사이저 핸들 스타일 */
.resizer-handle {
  /* 기본 상태 */
  width: 4px;
  background: transparent;
  cursor: col-resize;
  
  /* 호버/드래그 상태 */
  &:hover, &:active {
    background: var(--color-primary);
    transition: background 150ms ease;
  }
}
```

### 4.3 패널 접기/펼치기

| 패널 | 최소 너비 | 기본 너비 | 접힌 상태 | 단축키 |
|------|----------|----------|----------|--------|
| 사이드바 | 200px | 240px | 64px (아이콘만) | `Ctrl + B` |
| 세부 패널 | 250px | 300px | 0px (숨김) | `Ctrl + Shift + B` |
| 하단 패널 | 100px | 200px | 0px (숨김) | `Ctrl + J` |

### 4.4 레이아웃 프리셋

사용자가 자주 사용하는 레이아웃을 저장/불러오기:

| 프리셋 | 설명 | 단축키 |
|--------|------|--------|
| 기본 | 사이드바 + 메인 콘텐츠 | `Ctrl + Alt + 1` |
| 분할 편집 | 좌우 50:50 분할 | `Ctrl + Alt + 2` |
| 데이터 집중 | 사이드바 숨김 + 메인 최대화 | `Ctrl + Alt + 3` |
| 비교 모드 | 3열 분할 | `Ctrl + Alt + 4` |

---

## 5. 드래그 앤 드롭

### 5.1 지원 시나리오

| 영역 | 드래그 가능 항목 | 드롭 대상 | 동작 |
|------|----------------|----------|------|
| 탭 바 | 탭 | 탭 바 내 / 패널 | 순서 변경 / 패널 이동 |
| 테이블 | 행 | 테이블 내 | 순서 변경 |
| 트리 메뉴 | 항목 | 다른 폴더 | 이동 |
| 카드 | 카드 | 컬럼 | 상태 변경 (칸반) |
| 파일 | 외부 파일 | 업로드 영역 | 파일 업로드 |
| 위젯 | 대시보드 위젯 | 그리드 | 위치 변경 |

### 5.2 드래그 피드백

```
┌──────────────────────────────────────────────────────────────────────┐
│                                                                      │
│  드래그 시작     →     드래그 중      →      드롭 완료              │
│                                                                      │
│  ┌────────┐          ┌────────┐           ┌────────┐               │
│  │ 원본   │          │ 고스트 │ 반투명    │ 완료   │ 성공 애니메이션│
│  │ 항목   │  grab    │ (clone)│ 50%       │ 상태   │ 0.2s ease     │
│  └────────┘          └────────┘           └────────┘               │
│                         ↓                                           │
│                    드롭 영역 하이라이트                              │
│                    (primary-100 배경)                                │
│                                                                      │
└──────────────────────────────────────────────────────────────────────┘
```

### 5.3 접근성 대안

> [!CAUTION]
> 드래그 앤 드롭은 반드시 **키보드 대안**을 제공해야 합니다.

| 동작 | 키보드 대안 |
|------|------------|
| 항목 선택 | `Space` |
| 이동 모드 진입 | `Enter` 또는 `M` |
| 방향 이동 | 화살표 키 |
| 이동 확정 | `Enter` |
| 이동 취소 | `Escape` |

---

## 6. 커맨드 팔레트

### 6.1 개요

VS Code의 `Ctrl + Shift + P`처럼 모든 명령을 검색하고 실행:

```
┌───────────────────────────────────────────────────────────────────────┐
│  ┌─────────────────────────────────────────────────────────────────┐  │
│  │ >  예산안 작성                                             🔍   │  │
│  └─────────────────────────────────────────────────────────────────┘  │
│  ┌─────────────────────────────────────────────────────────────────┐  │
│  │ 📄  예산안 작성 시작                              예산관리      │  │
│  │ ─────────────────────────────────────────────────────────────── │  │
│  │ 📊  예산 집행 현황 조회                           예산관리      │  │
│  │ ─────────────────────────────────────────────────────────────── │  │
│  │ 📝  예산 변경 신청서 작성                         예산관리      │  │
│  │ ─────────────────────────────────────────────────────────────── │  │
│  │ 👤  예산 담당자 지정                              설정          │  │
│  └─────────────────────────────────────────────────────────────────┘  │
│                                                                       │
│  최근 실행 (5개)  │  즐겨찾기 (★)  │  모든 명령                      │
└───────────────────────────────────────────────────────────────────────┘
```

### 6.2 명령 카테고리

| 카테고리 | 접두사 | 예시 |
|---------|--------|------|
| 메뉴 이동 | 없음 | `인사카드`, `급여명세서` |
| 명령 실행 | `>` | `> 새 문서 작성` |
| 파일 검색 | `#` | `# 2024년_예산안.xlsx` |
| 설정 변경 | `@` | `@ 다크 모드` |
| 도움말 | `?` | `? 단축키 목록` |

### 6.3 AI 통합

```
┌───────────────────────────────────────────────────────────────────────┐
│  > 이번 달 부서별 인건비 합계 알려줘                                   │
│  ┌─────────────────────────────────────────────────────────────────┐  │
│  │ 🤖 AI 응답:                                                     │  │
│  │                                                                 │  │
│  │ 2024년 12월 부서별 인건비 합계:                                  │  │
│  │ • 총무부: 45,230,000원                                          │  │
│  │ • 기획부: 52,180,000원                                          │  │
│  │ • 경리부: 38,920,000원                                          │  │
│  │                                                                 │  │
│  │ [📊 상세 보기]  [📋 보고서 생성]  [📤 내보내기]                   │  │
│  └─────────────────────────────────────────────────────────────────┘  │
└───────────────────────────────────────────────────────────────────────┘
```

---

## 7. AI 어시스턴트 패널

### 7.1 개요

GitHub Copilot, Cursor AI처럼 업무 컨텍스트를 이해하는 AI 어시스턴트를 통합합니다.
우측 패널에서 AI와 대화하며 업무를 지원받을 수 있습니다.

```
┌─────────────────────────────────────────────────────────────────────────────┐
│ [Header]                                                      [🤖 AI 버튼] │
├────────────┬──────────────────────────────────────┬─────────────────────────┤
│ [Sidebar]  │ [Main Content]                       │ [AI 패널]               │
│            │                                      │                         │
│            │  예산안 작성 화면                     │ ┌─────────────────────┐ │
│            │  ┌─────────────────────────────────┐ │ │ 🤖 AI 어시스턴트    │ │
│            │  │                                 │ │ ├─────────────────────┤ │
│            │  │   현재 작업 중인 콘텐츠          │ │ │ 무엇을 도와드릴까요? │ │
│            │  │                                 │ │ │                     │ │
│            │  └─────────────────────────────────┘ │ │ [대화 기록]          │ │
│            │                                      │ │                     │ │
│            │                                      │ │ ┌───────────────────┐│ │
│            │                                      │ │ │ 메시지 입력...   🎤││ │
│            │                                      │ │ └───────────────────┘│ │
│            │                                      │ └─────────────────────┘ │
└────────────┴──────────────────────────────────────┴─────────────────────────┘
                                                              [AI FAB 버튼] 🤖
```

### 7.2 AI 버튼 및 진입점

#### 7.2.1 글로벌 AI 버튼 (헤더)

| 위치 | 상태 | 동작 |
|------|------|------|
| 헤더 우측 | 기본 | AI 아이콘 버튼 표시 |
| 헤더 우측 | 활성 (대화 중) | 파란색 글로우 + 점 애니메이션 |
| 헤더 우측 | 응답 대기 | 스피너 애니메이션 |

```tsx
// AI 버튼 컴포넌트
<Button
  variant="ghost"
  size="icon"
  onClick={toggleAIPanel}
  aria-label="AI 어시스턴트 열기"
  aria-expanded={isAIPanelOpen}
  className="relative"
>
  <BotIcon className="w-5 h-5" />
  {hasUnreadMessages && (
    <span className="absolute -top-1 -right-1 w-2 h-2 bg-primary rounded-full animate-pulse" />
  )}
</Button>
```

#### 7.2.2 플로팅 액션 버튼 (FAB)

| 속성 | 값 |
|------|-----|
| 위치 | 우하단 (right: 24px, bottom: 24px) |
| 크기 | 56px |
| 호버 | 스케일 1.1 + 그림자 확대 |
| 모바일 | 48px, bottom: 16px |

```css
.ai-fab {
  position: fixed;
  right: 24px;
  bottom: 24px;
  width: 56px;
  height: 56px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--color-primary), var(--color-accent));
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  transition: all 200ms ease;
}

.ai-fab:hover {
  transform: scale(1.1);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
}
```

### 7.3 AI 대화 패널

#### 7.3.1 패널 레이아웃

```
┌─────────────────────────────────────┐
│ 🤖 AI 어시스턴트          ─ □ ✕   │ ← 패널 헤더
├─────────────────────────────────────┤
│ [Agent 모드] [Chat 모드] [기록]    │ ← 모드 탭
├─────────────────────────────────────┤
│                                     │
│ ┌─────────────────────────────────┐ │
│ │ 👤 사용자:                      │ │
│ │ 이번 달 예산 집행 현황 알려줘   │ │
│ └─────────────────────────────────┘ │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │ 🤖 AI:                          │ │
│ │ 2024년 12월 예산 집행 현황:     │ │
│ │                                 │ │
│ │ • 총 예산: 1,500,000,000원      │ │
│ │ • 집행액: 1,230,000,000원       │ │
│ │ • 집행률: 82%                   │ │
│ │                                 │ │
│ │ [📊 그래프] [📋 상세] [📤 공유]  │ │ ← 액션 버튼
│ └─────────────────────────────────┘ │
│                                     │
├─────────────────────────────────────┤
│ [📎 파일] [📋 현재 화면 첨부]      │ ← 첨부 옵션
├─────────────────────────────────────┤
│ ┌─────────────────────────────────┐ │
│ │ 메시지 입력...        🎤 ➤    │ │ ← 입력창
│ └─────────────────────────────────┘ │
└─────────────────────────────────────┘
```

#### 7.3.2 패널 속성

| 속성 | 값 |
|------|-----|
| 기본 너비 | 360px |
| 최소 너비 | 280px |
| 최대 너비 | 600px |
| 리사이즈 | 좌측 핸들로 조정 가능 |
| 열기/닫기 단축키 | `Ctrl + Shift + I` (Windows), `⌘ + ⇧ + I` (macOS) |

### 7.4 대화 모드

#### 7.4.1 Chat 모드 (기본)

일반적인 질의응답 대화:

```typescript
interface ChatMessage {
  id: string;
  role: 'user' | 'assistant';
  content: string;
  timestamp: Date;
  attachments?: Attachment[];
  actions?: ActionButton[];  // AI 응답에 포함된 액션 버튼
}

interface ActionButton {
  label: string;           // "상세 보기"
  icon: string;            // "chart"
  action: 'navigate' | 'export' | 'execute' | 'copy';
  payload: Record<string, unknown>;
}
```

#### 7.4.2 Agent 모드 (자율 실행)

> [!IMPORTANT]
> Agent 모드는 사용자 승인 하에 자동으로 여러 작업을 수행합니다.

```
┌─────────────────────────────────────┐
│ 🤖 Agent 모드                       │
├─────────────────────────────────────┤
│                                     │
│ 📋 작업: "이번 달 부서별 인건비 보고서" │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │ ✅ 1. 인사 데이터 조회           │ │
│ │ ✅ 2. 급여 데이터 집계           │ │
│ │ 🔄 3. 부서별 통계 계산 중...     │ │ ← 진행 중
│ │ ⏳ 4. 보고서 생성                │ │
│ │ ⏳ 5. 파일 저장                  │ │
│ └─────────────────────────────────┘ │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │ 🔍 현재 단계 상세:               │ │
│ │ 총무부, 기획부, 경리부 데이터를  │ │
│ │ 집계하고 있습니다...            │ │
│ └─────────────────────────────────┘ │
│                                     │
│   [⏸️ 일시정지]  [🛑 중단]  [📋 로그] │
└─────────────────────────────────────┘
```

#### 7.4.3 Agent 작업 승인 플로우

```
┌─────────────────────────────────────────────────────────┐
│                                                         │
│  🤖 AI가 다음 작업을 수행하려고 합니다:                   │
│                                                         │
│  ┌───────────────────────────────────────────────────┐  │
│  │ 📄 "2024년_12월_예산_집행_현황.xlsx" 파일 생성     │  │
│  │ 📤 파일을 기획부 공유 폴더에 저장                  │  │
│  │ 📧 기획부장에게 이메일 알림 전송                   │  │
│  └───────────────────────────────────────────────────┘  │
│                                                         │
│  ⚠️ 이 작업은 되돌릴 수 없을 수 있습니다.                │
│                                                         │
│       [✅ 모두 승인]  [✏️ 수정]  [❌ 취소]               │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 7.5 컨텍스트 인식

#### 7.5.1 현재 화면 컨텍스트

| 컨텍스트 | 자동 수집 정보 |
|----------|---------------|
| 현재 메뉴 | 예산관리 > 예산 집행 현황 |
| 선택된 데이터 | 선택된 행의 ID, 필드 값 |
| 필터 상태 | 적용된 필터 조건 |
| 폼 데이터 | 입력 중인 폼 필드 값 |
| 사용자 정보 | 소속 부서, 권한 |

```typescript
interface AIContext {
  currentRoute: string;           // '/budget/execution'
  currentService: string;         // 'budget-web'
  selectedData?: Record<string, unknown>[];
  formData?: Record<string, unknown>;
  filters?: Filter[];
  user: {
    department: string;
    role: string;
    permissions: string[];
  };
}
```

#### 7.5.2 화면 첨부 기능

```
┌───────────────────────────────────────┐
│ 📋 현재 화면을 AI에게 공유            │
├───────────────────────────────────────┤
│                                       │
│  ┌─────────────────────────────────┐  │
│  │ [스크린샷 미리보기]              │  │
│  │                                 │  │
│  │  현재 테이블/폼 캡처             │  │
│  └─────────────────────────────────┘  │
│                                       │
│  ☑️ 테이블 데이터 포함                │
│  ☑️ 필터 조건 포함                    │
│  ☐ 개인정보 마스킹                    │
│                                       │
│     [첨부하기]  [취소]                │
└───────────────────────────────────────┘
```

### 7.6 AI 응답 렌더링

#### 7.6.1 리치 응답 타입

| 타입 | 설명 | 렌더링 |
|------|------|--------|
| **텍스트** | 일반 텍스트 | Markdown 렌더링 |
| **테이블** | 데이터 테이블 | 인터랙티브 테이블 |
| **차트** | 시각화 | Chart.js / Recharts |
| **코드** | 코드 블록 | 구문 강조 + 복사 버튼 |
| **카드** | 요약 카드 | 클릭 가능 카드 |
| **액션** | 실행 가능 버튼 | 버튼 그룹 |

```tsx
// AI 응답 렌더링 예시
function AIResponse({ message }: { message: ChatMessage }) {
  return (
    <div className="ai-message">
      {/* 마크다운 텍스트 */}
      <Markdown>{message.content}</Markdown>
      
      {/* 테이블 데이터 */}
      {message.table && (
        <DataTable data={message.table} />
      )}
      
      {/* 차트 */}
      {message.chart && (
        <Chart type={message.chart.type} data={message.chart.data} />
      )}
      
      {/* 액션 버튼 */}
      {message.actions && (
        <div className="flex gap-2 mt-4">
          {message.actions.map(action => (
            <Button key={action.label} onClick={() => executeAction(action)}>
              {action.label}
            </Button>
          ))}
        </div>
      )}
    </div>
  );
}
```

### 7.7 빠른 액션 (Quick Actions)

#### 7.7.1 컨텍스트 기반 추천 액션

현재 화면에 따라 AI가 추천하는 빠른 액션:

```
┌─────────────────────────────────────┐
│ 💡 추천 액션                        │
├─────────────────────────────────────┤
│ ┌─────────────────────────────────┐ │
│ │ 📊 이 데이터로 차트 만들기      │ │
│ └─────────────────────────────────┘ │
│ ┌─────────────────────────────────┐ │
│ │ 📝 선택 항목 요약하기           │ │
│ └─────────────────────────────────┘ │
│ ┌─────────────────────────────────┐ │
│ │ 📋 보고서 초안 작성             │ │
│ └─────────────────────────────────┘ │
│ ┌─────────────────────────────────┐ │
│ │ 🔍 이상치 분석                  │ │
│ └─────────────────────────────────┘ │
└─────────────────────────────────────┘
```

#### 7.7.2 슬래시 명령어

| 명령어 | 기능 |
|--------|------|
| `/요약` | 현재 화면 데이터 요약 |
| `/분석` | 데이터 트렌드 분석 |
| `/보고서` | 보고서 초안 생성 |
| `/비교` | 선택 항목 비교 |
| `/검색 [키워드]` | ERP 내 데이터 검색 |
| `/도움말` | AI 기능 도움말 |

### 7.8 음성 입력

| 기능 | 설명 |
|------|------|
| 활성화 | 마이크 버튼 클릭 또는 `Ctrl + Shift + V` |
| 언어 | 한국어 우선, 영어 자동 감지 |
| 시각 피드백 | 파형 애니메이션 |
| 취소 | ESC 또는 마이크 버튼 재클릭 |

### 7.9 AI 설정

```
┌─────────────────────────────────────┐
│ ⚙️ AI 설정                          │
├─────────────────────────────────────┤
│                                     │
│ 응답 스타일                          │
│ ○ 간결하게                           │
│ ● 상세하게                           │
│ ○ 전문적으로                         │
│                                     │
│ Agent 모드                           │
│ ☑️ 작업 전 항상 승인 요청             │
│ ☐ 간단한 작업은 자동 실행             │
│                                     │
│ 알림                                 │
│ ☑️ AI 응답 시 알림음                  │
│ ☑️ Agent 작업 완료 시 알림            │
│                                     │
│ 데이터 공유                          │
│ ☑️ 현재 화면 컨텍스트 자동 공유        │
│ ☐ 개인정보 자동 마스킹                │
│                                     │
└─────────────────────────────────────┘
```

### 7.10 기술 스택 (AI 관련)

| 라이브러리 | 용도 |
|-----------|------|
| **AI SDK (Vercel)** | AI 스트리밍 응답 |
| **LangChain.js** | Agent 오케스트레이션 |
| **rehype-react** | Markdown 렌더링 |
| **Recharts** | 차트 렌더링 |
| **Web Speech API** | 음성 입력 |

```bash
# AI 관련 패키지 설치
pnpm add ai @langchain/core @langchain/openai recharts
pnpm add react-markdown rehype-raw rehype-sanitize
```

---

## 8. 키보드 기능

### 8.1 글로벌 단축키

| 분류 | 기능 | Windows/Linux | macOS |
|------|------|--------------|-------|
| **탐색** | 커맨드 팔레트 | `Ctrl + Shift + P` | `⌘ + ⇧ + P` |
| | 빠른 검색 | `/` 또는 `Ctrl + K` | `/` 또는 `⌘ + K` |
| | 사이드바 토글 | `Ctrl + B` | `⌘ + B` |
| | 설정 | `Ctrl + ,` | `⌘ + ,` |
| **탭** | 새 탭 | `Ctrl + T` | `⌘ + T` |
| | 탭 닫기 | `Ctrl + W` | `⌘ + W` |
| | 다음 탭 | `Ctrl + Tab` | `⌃ + Tab` |
| | 이전 탭 | `Ctrl + Shift + Tab` | `⌃ + ⇧ + Tab` |
| **분할** | 수평 분할 | `Ctrl + \` | `⌘ + \` |
| | 수직 분할 | `Ctrl + Shift + \` | `⌘ + ⇧ + \` |
| | 패널 최대화 | `Ctrl + Shift + M` | `⌘ + ⇧ + M` |
| **포커스** | 다음 영역 | `F6` | `F6` |
| | 이전 영역 | `Shift + F6` | `⇧ + F6` |
| **데이터** | 저장 | `Ctrl + S` | `⌘ + S` |
| | 실행취소 | `Ctrl + Z` | `⌘ + Z` |
| | 다시실행 | `Ctrl + Y` | `⌘ + ⇧ + Z` |

### 8.2 컨텍스트별 단축키

#### 테이블/그리드

| 기능 | 단축키 |
|------|--------|
| 행 선택 | `Space` |
| 다중 선택 | `Ctrl + Space` |
| 범위 선택 | `Shift + 화살표` |
| 편집 모드 | `Enter` 또는 `F2` |
| 편집 취소 | `Escape` |
| 행 삭제 | `Delete` |
| 복사 | `Ctrl + C` |
| 붙여넣기 | `Ctrl + V` |

#### 트리 메뉴

| 기능 | 단축키 |
|------|--------|
| 펼치기 | `→` 또는 `Enter` |
| 접기 | `←` |
| 상위로 | `←` (접힌 상태일 때) |
| 첫 항목 | `Home` |
| 마지막 항목 | `End` |

### 8.3 단축키 커스터마이징

사용자가 단축키를 직접 설정할 수 있는 UI 제공:

```typescript
interface KeyBinding {
  command: string;       // 'workbench.action.toggleSidebar'
  key: string;          // 'ctrl+b'
  when?: string;        // 'editorTextFocus'
  description: string;  // '사이드바 토글'
}
```

---

## 9. 마우스오버 및 인터랙션

### 9.1 호버 상태

| 요소 | 호버 효과 | 트랜지션 |
|------|----------|----------|
| 버튼 | 배경색 밝아짐 + 그림자 | 150ms ease |
| 메뉴 아이템 | 배경색 primary-50 | 100ms ease |
| 카드 | 그림자 확대 + 살짝 상승 | 200ms ease |
| 테이블 행 | 배경색 neutral-50 | 100ms ease |
| 링크 | 밑줄 + 색상 진해짐 | 100ms ease |
| 아이콘 버튼 | 배경 원형 하이라이트 | 150ms ease |

### 9.2 툴팁 시스템

```
┌──────────────────────────────────────────────┐
│                                              │
│   [🗑️]  ←── 호버 후 500ms                    │
│      ↓                                       │
│   ┌──────────────────────────┐               │
│   │ 삭제                     │               │
│   │ 선택한 항목을 삭제합니다  │ (설명 있을 때) │
│   │                         │               │
│   │ Ctrl+Delete             │ (단축키 표시)  │
│   └──────────────────────────┘               │
│                                              │
└──────────────────────────────────────────────┘
```

| 속성 | 값 |
|------|-----|
| 표시 딜레이 | 500ms |
| 사라짐 딜레이 | 100ms |
| 위치 우선순위 | top → bottom → right → left |
| 최대 너비 | 250px |
| 다크 모드 | 반전 색상 |

### 9.3 컨텍스트 메뉴

우클릭 시 나타나는 메뉴:

```
┌──────────────────────────────┐
│ 📄 열기                   ↵   │
│ 📑 새 탭에서 열기              │
│ ─────────────────────────── │
│ ✂️ 잘라내기            Ctrl+X │
│ 📋 복사                Ctrl+C │
│ 📥 붙여넣기            Ctrl+V │
│ ─────────────────────────── │
│ 🗑️ 삭제               Delete │
│ ─────────────────────────── │
│ ⚙️ 속성                       │
└──────────────────────────────┘
```

---

## 10. 유동적 레이아웃

### 10.1 반응형 브레이크포인트

| 브레이크포인트 | 너비 | 레이아웃 전략 |
|---------------|------|--------------|
| Mobile | < 768px | 단일 컬럼, 사이드바 오버레이 |
| Tablet | 768px ~ 1024px | 사이드바 접힘, 탭 스와이프 |
| Desktop | 1024px ~ 1440px | 전체 레이아웃 |
| Wide | > 1440px | 사이드 패널 추가 가능 |

### 10.2 동적 레이아웃 변경

```typescript
// 화면 크기에 따른 자동 레이아웃 조정
interface ResponsiveLayout {
  mobile: {
    sidebar: 'hidden' | 'overlay';
    panels: 'single';
    tabs: 'scrollable';
  };
  tablet: {
    sidebar: 'collapsed';
    panels: 'single' | 'split-horizontal';
    tabs: 'scrollable';
  };
  desktop: {
    sidebar: 'expanded';
    panels: 'any';
    tabs: 'scrollable' | 'wrap';
  };
}
```

### 10.3 레이아웃 기억

| 상태 | 저장 위치 | 동기화 |
|------|----------|--------|
| 패널 크기 | localStorage | 기기 내 |
| 탭 상태 | localStorage + API | 계정 동기화 |
| 프리셋 | API | 계정 동기화 |
| 마지막 활성 메뉴 | localStorage | 기기 내 |

---

## 11. 모던 디자인 시스템

### 11.1 디자인 원칙

> 공공기관 담당자들이 오랜 시간 업무에 사용해도 **거부감 없고, 세련되고, 현대적**인 디자인

| 원칙 | 설명 |
|------|------|
| **눈의 피로 최소화** | 부드러운 색상, 적절한 대비, 블루라이트 저감 |
| **시각적 계층 구조** | 중요한 정보가 자연스럽게 눈에 띄게 |
| **일관된 패턴** | 같은 동작은 같은 UI로 |
| **미니멀한 장식** | 불필요한 시각 요소 제거 |
| **부드러운 전환** | 급격한 변화 대신 애니메이션 |

### 11.2 컬러 팔레트 확장

#### 라이트 모드

```css
:root {
  /* 배경 계층 */
  --bg-base: #FFFFFF;
  --bg-surface: #F9FAFB;
  --bg-elevated: #FFFFFF;
  --bg-overlay: rgba(0, 0, 0, 0.4);
  
  /* 테두리 */
  --border-default: #E5E7EB;
  --border-subtle: #F3F4F6;
  --border-strong: #D1D5DB;
  
  /* 그림자 */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.07);
  --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
  --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.15);
}
```

#### 다크 모드

```css
:root.dark {
  --bg-base: #0F172A;
  --bg-surface: #1E293B;
  --bg-elevated: #334155;
  --bg-overlay: rgba(0, 0, 0, 0.6);
  
  --border-default: #334155;
  --border-subtle: #1E293B;
  --border-strong: #475569;
  
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.2);
  --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.3);
  --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.4);
  --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.5);
}
```

### 11.3 글래스모피즘 (Glassmorphism)

현대적 느낌을 위한 선택적 적용:

```css
.glass-panel {
  background: rgba(255, 255, 255, 0.7);
  backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
}

.dark .glass-panel {
  background: rgba(15, 23, 42, 0.7);
  border: 1px solid rgba(255, 255, 255, 0.1);
}
```

### 11.4 마이크로 애니메이션

```css
/* 버튼 호버 */
.btn-primary {
  transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1);
}
.btn-primary:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
}

/* 카드 호버 */
.card-interactive {
  transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
}
.card-interactive:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
}

/* 로딩 스피너 */
@keyframes spin {
  to { transform: rotate(360deg); }
}
.spinner {
  animation: spin 1s linear infinite;
}
```

### 11.5 아이콘 시스템

| 스타일 | 사용처 | 라이브러리 |
|--------|--------|-----------|
| 라인 아이콘 | 일반 UI | Lucide React |
| 솔리드 아이콘 | 강조, 활성 상태 | Lucide React (filled) |
| 컬러 아이콘 | 상태 표시 | Semantic 색상 적용 |

---

## 12. 기술 스택 (2025년 12월 최신)

### 12.1 Core UI 라이브러리

| 라이브러리 | 버전 | 용도 |
|-----------|------|------|
| **react-resizable-panels** | 2.x | 패널 크기 조정 |
| **dockview** | 1.x | 플로팅 윈도우, 탭 도킹 |
| **@dnd-kit/core** | 6.x | 드래그 앤 드롭 |
| **cmdk** | 1.x | 커맨드 팔레트 |
| **framer-motion** | 11.x | 애니메이션 |

### 12.2 상태 관리

| 라이브러리 | 용도 |
|-----------|------|
| **Zustand** | 글로벌 상태 (레이아웃, 테마) |
| **TanStack Query** | 서버 상태 관리 |
| **Jotai** | 원자적 UI 상태 (선택적) |

### 12.3 데이터 그리드

| 라이브러리 | 기능 |
|-----------|------|
| **TanStack Table** | 가상화, 정렬, 필터, 그룹화 |
| **@tanstack/react-virtual** | 대용량 데이터 가상 스크롤 |

### 12.4 패키지 설치 명령

```bash
# Core UI 라이브러리
pnpm add react-resizable-panels dockview @dnd-kit/core @dnd-kit/sortable cmdk framer-motion

# 상태 관리
pnpm add zustand @tanstack/react-query jotai

# 데이터 그리드 (기존 사용 중)
pnpm add @tanstack/react-table @tanstack/react-virtual
```

---

## 13. 구현 로드맵

### Phase 1: 기반 구축 (2~3주)

- [ ] react-resizable-panels 통합
- [ ] 사이드바/메인 패널 리사이저 구현
- [ ] 레이아웃 상태 저장/복원
- [ ] 기본 키보드 단축키 프레임워크

### Phase 2: 탭 시스템 (2주)

- [ ] 탭 바 컴포넌트 개발
- [ ] 탭 드래그 앤 드롭
- [ ] 분할 뷰 기본 구현
- [ ] 탭 상태 영속성

### Phase 3: 커맨드 팔레트 (1~2주)

- [ ] cmdk 통합
- [ ] 메뉴 검색 기능
- [ ] 최근 사용/즐겨찾기
- [ ] 키보드 네비게이션

### Phase 4: 고급 기능 (2~3주)

- [ ] 플로팅 윈도우 (dockview)
- [ ] 고급 드래그 앤 드롭
- [ ] 컨텍스트 메뉴
- [ ] 레이아웃 프리셋

### Phase 5: 디자인 고도화 (1~2주)

- [ ] 다크 모드
- [ ] 마이크로 애니메이션
- [ ] 글래스모피즘 선택적 적용
- [ ] 최종 디자인 QA

---

## 14. 성능 지표

### 14.1 목표 성능

| 지표 | 목표 | 측정 방법 |
|------|------|----------|
| First Contentful Paint | < 1.5s | Lighthouse |
| Time to Interactive | < 3s | Lighthouse |
| Cumulative Layout Shift | < 0.1 | Lighthouse |
| 최대 탭 수 | 50개 | 메모리 모니터링 |
| 패널 리사이즈 | 60fps | Performance API |
| 드래그 프레임 레이트 | 60fps | Performance API |

### 14.2 메모리 관리

```typescript
// 비활성 탭 가비지 컬렉션
const TAB_IDLE_THRESHOLD = 10 * 60 * 1000; // 10분

function cleanupIdleTabs(tabs: Tab[]) {
  return tabs.map(tab => {
    if (Date.now() - tab.lastActiveAt > TAB_IDLE_THRESHOLD) {
      return { ...tab, content: null, needsReload: true };
    }
    return tab;
  });
}
```

---

## 부록 A: 접근성 체크리스트

| 항목 | 요구사항 |
|------|----------|
| 키보드 탐색 | 모든 윈도우/패널 Tab 키로 접근 가능 |
| 포커스 트랩 | 모달/다이얼로그 내 포커스 순환 |
| 스크린리더 | 패널 상태 변경 시 aria-live 알림 |
| 드래그 대안 | 모든 드래그 동작에 키보드 대안 |
| 축소 모드 | prefers-reduced-motion 존중 |

---

## 부록 B: 기존 문서 참조

- [PRD_MAIN_UI.md](./PRD_MAIN_UI.md) - 기본 UI/인증 시스템 PRD
- [DESIGN_SYSTEM_RULES.md](./DESIGN_SYSTEM_RULES.md) - 디자인 시스템 규칙
- [ARCHITECTURE.md](./ARCHITECTURE.md) - 시스템 아키텍처
- [CODING_GUIDELINES.md](./CODING_GUIDELINES.md) - 코딩 지침

---

## 문서 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|----------|
| 1.0 | 2025-12-20 | 최초 작성 |
| 1.1 | 2025-12-20 | AI 어시스턴트 패널 및 Agent 기능 추가 |
