# 공공기관 ERP SaaS 메인 UI / 인증 시스템 PRD

> **문서 버전**: 2.0
> **작성일**: 2025-12-19
> **대상 독자**: 프론트엔드 개발자, UI/UX 디자이너, 프로젝트 관리자

---

## 목차

1. [개요](#1-개요)
2. [시스템 아키텍처](#2-시스템-아키텍처)
3. [서비스 목록](#3-서비스-목록)
4. [사용자 스토리](#4-사용자-스토리)
5. [UX 원칙](#5-ux-원칙)
6. [레이아웃 구조](#6-레이아웃-구조)
7. [인증 시스템](#7-인증-시스템)
8. [멀티 테넌트 시스템](#8-멀티-테넌트-시스템)
9. [접근성 요구사항](#9-접근성-요구사항)
10. [2025년 공공기관 준수사항](#10-2025년-공공기관-준수사항)
11. [성능 기준](#11-성능-기준)
12. [용어 사전](#12-용어-사전)

---

## 1. 개요

### 1.1 배경 및 목적

**문제점**: 
- 기존 공공기관 ERP 시스템은 복잡한 메뉴 구조와 낮은 접근성으로 사용자 교육에 많은 시간 소요
- 각 기관별 독립적인 시스템으로 유지보수 비용 증가
- 보안 및 접근성 규정 준수 어려움

**해결책**: 
VS Code 수준의 생산성을 제공하는 **"업무용 운영체제"** 개념의 SaaS ERP 시스템 개발

- ✅ **Micro Frontend 아키텍처**: 독립적 개발 및 배포
- ✅ **멀티 테넌트**: 기관별 테마 커스터마이징
- ✅ **AI 어시스턴트**: 자연어 업무 지원
- ✅ **접근성 완벽 준수**: WCAG 2.1 AA
- ✅ **2025년 보안 규정 준수**: 2FA, 감사 로그 등

### 1.2 대상 사용자

| 구분 | 설명 | 주요 니즈 |
|------|------|----------|
| **일반 사용자** | 행정/회계/인사 실무자 | 빠른 메뉴 접근, 반복 업무 간소화 |
| **관리자** | 기관/시스템 관리자 | 사용자 관리, 권한 설정, 테넌트 설정 |
| **고급 사용자** | 엑셀/IDE 숙련자 | 단축키, 대량 데이터 처리 |
| **접근성 사용자** | 시각/지체 장애인, 고령자 | 스크린리더, 키보드 전용 조작 |

### 1.3 핵심 지표 (KPI)

| 지표 | 목표 | 측정 방법 |
|------|------|----------|
| 사용자 교육 시간 | 50% 감소 | 신규 사용자 온보딩 시간 비교 |
| 업무 처리 클릭 수 | 40% 감소 | 주요 업무 플로우 클릭 횟수 |
| AI 사용률 | 60% 이상 | AI 어시스턴트 일간 활성 사용자 비율 |
| 접근성 오류 | **0건** | WAVE 도구 자동 검사 |
| 사용자 만족도 | 4.5/5 이상 | 분기별 설문조사 |
| Lighthouse 점수 | 90점 이상 | Accessibility, Performance |

---

## 2. 시스템 아키텍처

### 2.1 Micro Frontend 아키텍처

```
┌─────────────────────────────────────────────────────────────────────┐
│                        사용자 브라우저                                │
└─────────────────────────────┬───────────────────────────────────────┘
                              │
┌─────────────────────────────▼───────────────────────────────────────┐
│                      Shell App (Container)                          │
│                         Port: 3000                                  │
│  ┌───────────────────────────────────────────────────────────────┐  │
│  │ Header │ Sidebar │ Main Content (Service Loader) │ StatusBar │  │
│  └───────────────────────────────────────────────────────────────┘  │
└─────────────────────────────┬───────────────────────────────────────┘
                              │
        ┌─────────────────────┼─────────────────────┐
        │                     │                     │
┌───────▼───────┐    ┌────────▼────────┐    ┌───────▼───────┐
│  auth-web     │    │   hrm-web       │    │ payroll-web   │
│  Port: 3001   │    │   Port: 3010    │    │ Port: 3011    │
│  (인증)       │    │   (인사관리)     │    │ (급여관리)    │
└───────────────┘    └─────────────────┘    └───────────────┘
        │                     │                     │
        └─────────────────────┼─────────────────────┘
                              │
┌─────────────────────────────▼───────────────────────────────────────┐
│                       공통 패키지                                    │
│   @erp/ui (디자인 시스템) │ @erp/shared (비즈니스 로직) │ @erp/config │
└─────────────────────────────────────────────────────────────────────┘
```

### 2.2 기술 스택

| 분류 | 기술 | 버전 | 용도 |
|------|------|------|------|
| **프레임워크** | Next.js | 15.x | App Router, SSR/SSG |
| **언어** | TypeScript | 5.x | 타입 안전성 |
| **스타일링** | TailwindCSS | 3.x | 유틸리티 CSS |
| **UI 라이브러리** | Radix UI | - | 접근성 우수 프리미티브 |
| **상태 관리** | Zustand | 4.x | 경량 상태 관리 |
| **폼 관리** | React Hook Form + Zod | - | 유효성 검사 |
| **데이터 그리드** | TanStack Table | 8.x | 가상화 지원 (10만+ 건) |
| **인증** | NextAuth.js | 5.x | OAuth, 2FA |
| **모노레포** | pnpm + Turborepo | - | 빌드 캐싱 |
| **컨테이너** | Docker | - | 독립 배포 |
| **컴포넌트 문서** | Storybook | 8.x | UI 카탈로그 |

---

## 3. 서비스 목록

### 3.1 프론트엔드 서비스 (Micro Frontends)

> [!IMPORTANT]
> 각 서비스는 **완전히 독립적으로 배포** 가능해야 합니다.
> Docker 컨테이너로 개별 배포됩니다.

| 서비스 | 포트 | Docker 이미지 | 역할 |
|--------|------|--------------|------|
| **shell** | 3000 | `erp/shell:latest` | 메인 쉘 (Container), 통합 레이아웃 |
| **auth-web** | 3001 | `erp/auth-web:latest` | 로그인/인증/2FA |
| **tenant-web** | 3002 | `erp/tenant-web:latest` | 테넌트 관리, 테마 설정 |
| **user-web** | 3003 | `erp/user-web:latest` | 사용자/조직도/권한 |
| **hrm-web** | 3010 | `erp/hrm-web:latest` | 인사관리, 인사카드 |
| **payroll-web** | 3011 | `erp/payroll-web:latest` | 급여관리, 연말정산 |
| **budget-web** | 3012 | `erp/budget-web:latest` | 예산관리 |
| **attendance-web** | 3013 | `erp/attendance-web:latest` | 복무관리, 근태 |
| **accounting-web** | 3014 | `erp/accounting-web:latest` | 회계관리, 전표 |
| **asset-web** | 3015 | `erp/asset-web:latest` | 자산관리 |
| **inventory-web** | 3016 | `erp/inventory-web:latest` | 물품관리 |
| **approval-web** | 3017 | `erp/approval-web:latest` | 전자결재 |
| **vehicle-web** | 3018 | `erp/vehicle-web:latest` | 차량관리 |
| **report-web** | 3019 | `erp/report-web:latest` | 보고서/통계 |
| **revenue-web** | 3020 | `erp/revenue-web:latest` | 수입관리 |
| **expenditure-web** | 3021 | `erp/expenditure-web:latest` | 지출관리 |
| **storybook** | 6006 | `erp/storybook:latest` | 컴포넌트 카탈로그 |

### 3.2 공통 패키지

| 패키지명 | 경로 | 설명 |
|---------|------|------|
| **@erp/ui** | `packages/ui` | shadcn/ui 기반 디자인 시스템, 멀티 테넌트 테마 |
| **@erp/shared** | `packages/erp-shared` | API 클라이언트, 공통 타입, 유틸리티 |
| **@erp/config** | `packages/config` | Tailwind, ESLint, TypeScript 공통 설정 |

---

## 4. 사용자 스토리

### 4.1 인증 관련

| 우선순위 | 사용자 | 행위 | 목적 |
|:-------:|--------|------|------|
| P0 | 접근성 사용자 | Tab 키만으로 로그인 폼을 작성하고 제출한다 | 마우스 없이 로그인하기 위해 |
| P0 | 일반 사용자 | 사전 승인된 이메일로만 로그인한다 | 보안 강화를 위해 |
| P0 | 일반 사용자 | OTP 2차 인증을 완료한다 | 계정 보안 강화를 위해 |
| P1 | 일반 사용자 | 네이버/카카오/구글 계정을 연동한다 | 간편 로그인을 위해 |

### 4.2 메인 UI 관련

| 우선순위 | 사용자 | 행위 | 목적 |
|:-------:|--------|------|------|
| P0 | 일반 사용자 | 로그인 후 기관별 테마가 자동 적용된 대시보드를 본다 | 소속 기관 확인을 위해 |
| P0 | 고급 사용자 | `/` 키를 눌러 검색창에서 메뉴명을 검색한다 | 빠른 메뉴 접근을 위해 |
| P1 | 일반 사용자 | 다중 탭으로 여러 업무를 동시에 처리한다 | 멀티태스킹을 위해 |
| P1 | 관리자 | AI 어시스턴트에게 "이번 달 부서별 인건비" 질문한다 | 보고서 작성 시간 단축을 위해 |

---

## 5. UX 원칙

### 5.1 Public UX 5대 원칙

```
┌───────────────────────────────────────────────────────────────┐
│                      Public UX 5대 원칙                        │
├───────────────┬───────────────┬───────────────┬───────────────┤
│ Zero Training │ Progressive   │ Keyboard-First│ Accessibility │
│ 매뉴얼 없이   │ Disclosure    │ 마우스 불필요 │ WCAG 2.1 AA   │
│ 직관적 사용   │ 단순→고급     │ 단축키 완비   │ 스크린리더    │
├───────────────┴───────────────┴───────────────┴───────────────┤
│                         Fail-safe                              │
│                 실수 방지 · 즉시 복구 · 자동 저장               │
└───────────────────────────────────────────────────────────────┘
```

### 5.2 VS Code 스타일 단축키

| 기능 | 단축키 | 설명 |
|------|--------|------|
| 메뉴 토글 | `Ctrl + B` | 좌측 사이드바 열기/닫기 |
| 탭 전환 | `Ctrl + Tab` | 다음 탭으로 이동 |
| 검색 | `Ctrl + Shift + F` | 통합 검색 열기 |
| 커맨드 팔레트 | `Ctrl + Shift + P` | 명령어 검색 |
| 빠른 검색 | `/` | 검색창 포커스 |
| 영역 이동 | `F6` | 다음 주요 영역으로 포커스 이동 |

---

## 6. 레이아웃 구조

### 6.1 전체 구조도

```
┌─────────────────────────────────────────────────────────────────────┐
│ [Header: 64px]                                                      │
│ ┌─────────────┬───────────────────────────┬─────────────────────┐   │
│ │ Logo       │ 통합 검색 (/ 키 포커스)    │ 알림 즐겨찾기 프로필│   │
│ └─────────────┴───────────────────────────┴─────────────────────┘   │
├────────────────┬────────────────────────────────────────────────────┤
│ [Sidebar]      │ [Main Content]                                     │
│ 240px          │ ┌─────────────────────────────────────────────┐    │
│ (접힘: 64px)   │ │ [Workspace Tabs]                            │    │
│                │ ├─────────────────────────────────────────────┤    │
│ ┌────────────┐ │ │                                             │    │
│ │ 즐겨찾기   │ │ │   Service Content                          │    │
│ ├────────────┤ │ │   (iframe 또는 Module Federation)           │    │
│ │ 최근 사용  │ │ │                                             │    │
│ ├────────────┤ │ │                                             │    │
│ │ 메뉴 트리  │ │ │                                             │    │
│ │ (3 Depth)  │ │ │                                             │    │
│ │            │ │ └─────────────────────────────────────────────┘    │
│ └────────────┘ │                                                    │
├────────────────┴────────────────────────────────────────────────────┤
│ [StatusBar: 32px]  사용자 정보 │ 시스템 상태 │ 세션 타이머          │
└─────────────────────────────────────────────────────────────────────┘
                                                    [AI 어시스턴트 FAB]
```

### 6.2 글로벌 헤더 상세

| 영역 | 구성요소 | 기능 |
|------|----------|------|
| 좌측 | 기관 로고 (테넌트별), 시스템명 | 브랜딩, 홈 링크 |
| 중앙 | 통합 검색바 | 메뉴/문서/데이터 검색, `/` 키 포커스 |
| 우측 | 알림, 즐겨찾기, 사용자 프로필 | 드롭다운 메뉴 |

### 6.3 사이드 메뉴 구조

> [!IMPORTANT]
> 메뉴는 **3 Depth까지만** 허용하여 인지 부하를 최소화합니다.

| 기능 | 설명 |
|------|------|
| 접기/펼치기 | `Ctrl+B` 단축키, 전체 또는 서비스별 토글 |
| 즐겨찾기 | 사용자별 메뉴 고정, 상단 노출 |
| 최근 사용 | 자동 상단 배치 (최대 5개) |
| 키보드 탐색 | ↑↓ 이동, Enter 선택, Escape 닫기 |
| 검색 필터 | 메뉴명 실시간 필터링 |

---

## 7. 인증 시스템

### 7.1 인증 플로우

```
┌──────────────┐     ┌──────────────┐     ┌──────────────┐
│ 로그인 화면  │────▶│ 이메일       │────▶│ 사전 승인    │
│ 접속         │     │ 입력         │     │ 확인         │
└──────────────┘     └──────────────┘     └──────┬───────┘
                                                 │
                     ┌─────────────────┐         │미승인
                     │ ❌ 관리자에게   │◀────────┘
                     │ 문의 안내       │
                     └─────────────────┘
                                                 │승인됨
                                                 ▼
┌──────────────┐     ┌──────────────┐     ┌──────────────┐
│ 테넌트 테마  │◀────│ 2FA (OTP)    │◀────│ 비밀번호     │
│ 적용         │     │ 인증         │     │ 입력         │
└──────────────┘     └──────────────┘     └──────────────┘
       │
       ▼
┌──────────────┐
│ 대시보드     │
│ 진입         │
└──────────────┘
```

### 7.2 인증 방식

#### 사전 승인 이메일 (회원가입 없음)

> [!CAUTION]
> 회원가입 기능은 **없습니다**. 관리자가 사전에 등록한 이메일만 로그인 가능합니다.

```typescript
// 사전 승인 확인 로직
async function validateEmail(email: string): Promise<boolean> {
  const response = await fetch(`/api/auth/check-email`, {
    method: 'POST',
    body: JSON.stringify({ email }),
  });
  
  const { isApproved } = await response.json();
  
  if (!isApproved) {
    throw new Error('승인되지 않은 이메일입니다. 관리자에게 문의하세요.');
  }
  
  return true;
}
```

#### 소셜 로그인 연동

로그인 **후** 추가 연동 가능 (최대 3개):

| 제공자 | API | 용도 |
|--------|-----|------|
| 네이버 | Naver Login API | 간편 로그인 |
| 카카오 | Kakao Login API | 간편 로그인 |
| 구글 | Google OAuth 2.0 | 간편 로그인 |

### 7.3 로그인 화면 UI 요구사항

- ✅ 기관 로고 및 시스템명 표시
- ✅ 이메일/비밀번호 입력 필드 (실시간 유효성 검사)
- ✅ 로그인 버튼 (Submit 시 로딩 스피너)
- ✅ "비밀번호 찾기" 링크
- ✅ 소셜 로그인 버튼 (연동된 경우만 표시)
- ✅ 접근성: 모든 입력 필드에 label 연결, 오류 메시지 aria-live

---

## 8. 멀티 테넌트 시스템

### 8.1 테넌트 식별

- **도메인 기반**: `seoul.erp.go.kr`, `busan.erp.go.kr`
- **로그인 시**: 이메일 도메인으로 테넌트 자동 식별

### 8.2 테마 커스터마이징 (10가지 색상)

각 공공기관은 다음 **10가지 색상**을 커스터마이징할 수 있습니다:

| 색상 | CSS 변수 | 용도 |
|------|----------|------|
| Primary | `--color-primary` | 주요 브랜드 색상 |
| Primary Foreground | `--color-primary-foreground` | Primary 위 텍스트 |
| Secondary | `--color-secondary` | 보조 색상 |
| Secondary Foreground | `--color-secondary-foreground` | Secondary 위 텍스트 |
| Accent | `--color-accent` | 강조 색상 |
| Accent Foreground | `--color-accent-foreground` | Accent 위 텍스트 |
| Muted | `--color-muted` | 비활성/배경 |
| Muted Foreground | `--color-muted-foreground` | Muted 위 텍스트 |
| Background | `--color-background` | 기본 배경 |
| Foreground | `--color-foreground` | 기본 텍스트 |

### 8.3 테마 적용 로직

```typescript
// 로그인 성공 시 테넌트 테마 자동 적용
function applyTenantTheme(theme: TenantTheme): void {
  const root = document.documentElement;
  
  Object.entries(theme.colors).forEach(([key, value]) => {
    const cssVar = `--color-${toKebabCase(key)}`;
    root.style.setProperty(cssVar, hexToRgb(value));
  });
  
  localStorage.setItem('tenant-theme-id', theme.tenantId);
}
```

### 8.4 사전 정의 테마 프리셋 (10개)

1. 서울특별시
2. 부산광역시
3. 인천광역시
4. 대구광역시
5. 광주광역시
6. 대전광역시
7. 울산광역시
8. 세종특별자치시
9. 경기도
10. 강원도

---

## 9. 접근성 요구사항

> [!CAUTION]
> 공공기관 웹사이트는 법적으로 웹 접근성 준수가 **의무**입니다.

### 9.1 WCAG 2.1 AA 준수 항목

| 항목 | 기준 | 구현 방법 |
|------|------|----------|
| 키보드 접근 | 모든 기능 | Tab/Enter/Escape 완벽 지원 |
| 스크린리더 | ARIA 라벨 | 모든 인터랙티브 요소에 label |
| 명도 대비 | 4.5:1 이상 | 디자인 토큰에서 검증된 색상만 사용 |
| 포커스 표시 | 명확한 아웃라인 | 2px solid primary 색상 |
| 애니메이션 | 비활성 옵션 | `prefers-reduced-motion` 미디어 쿼리 |

### 9.2 스크린리더 지원 예시

```tsx
// 검색 입력 컴포넌트
<label htmlFor="global-search" className="sr-only">
  통합 검색
</label>
<input
  id="global-search"
  type="search"
  aria-describedby="search-help"
  placeholder="메뉴, 문서, 데이터 검색..."
/>
<span id="search-help" className="sr-only">
  슬래시(/) 키를 눌러 빠르게 검색할 수 있습니다
</span>
```

### 9.3 검증 도구

- **Lighthouse**: Accessibility 점수 90점 이상
- **WAVE**: 오류 0건
- **axe-core**: 스크린리더 검사
- **NVDA/VoiceOver**: 실제 스크린리더 테스트

---

## 10. 2025년 공공기관 준수사항

### 10.1 개인정보 보호법

| 항목 | 구현 |
|------|------|
| 개인정보 수집/이용 동의 | 로그인 전 동의 화면 |
| 개인정보 처리방침 | 푸터에 링크 |
| **3년 미사용 계정 자동 휴면** | 스케줄러로 자동 처리 |

### 10.2 보안 강화

| 항목 | 구현 |
|------|------|
| **2단계 인증 (2FA)** | OTP (Google Authenticator 호환) |
| **비밀번호 정책** | 10자 이상 + 대소문자 + 숫자 + 특수문자 |
| **세션 타임아웃** | 30분 무활동 시 자동 로그아웃 |
| IP 화이트리스트 | 관리자 설정 가능 |

### 10.3 감사 로그

| 항목 | 구현 |
|------|------|
| 로그 대상 | 로그인, 데이터 수정/삭제, 권한 변경 |
| **보관 기간** | 3년 |
| 조회 권한 | 감사 담당자만 |

### 10.4 파일 업로드 보안

| 항목 | 구현 |
|------|------|
| **악성코드 검사** | ClamAV 연동 |
| 확장자 화이트리스트 | PDF, HWP, DOC, XLS, JPG, PNG 등 |
| 최대 파일 크기 | 100MB |

---

## 11. 성능 기준

| 항목 | 기준 | 측정 도구 |
|------|------|----------|
| 초기 로딩 (FCP) | **3초 이내** | Lighthouse |
| 상호작용 가능 (TTI) | 5초 이내 | Lighthouse |
| 화면 전환 | 300ms 이하 | 라우팅 완료 시간 |
| 데이터 그리드 | **10만 건** 성능 저하 없음 | 가상화 스크롤 |
| API 실패 | 친화적 메시지 표시 | 에러 바운더리 |
| 자동 저장 | 폼 데이터 로컬 저장 | localStorage |
| Turborepo 캐시 | 2차 빌드 **90% 단축** | 빌드 시간 측정 |

---

## 12. 용어 사전

### 아키텍처 용어

| 용어 | 설명 |
|------|------|
| **Micro Frontend** | 각 기능을 독립적인 프론트엔드 앱으로 분리하는 아키텍처 |
| **Monorepo** | 여러 프로젝트를 하나의 저장소에서 관리하는 방식 |
| **Shell App** | 모든 Micro Frontend를 통합하는 컨테이너 앱 |
| **Module Federation** | 웹팩 기능으로 여러 앱을 런타임에 통합 |

### 인증 용어

| 용어 | 설명 |
|------|------|
| **JWT** | JSON Web Token, 인증 토큰 형식 |
| **2FA** | Two-Factor Authentication, 2단계 인증 |
| **OAuth** | 소셜 로그인을 위한 인증 프로토콜 |
| **OTP** | One-Time Password, 일회용 비밀번호 |

### 접근성 용어

| 용어 | 설명 |
|------|------|
| **WCAG** | Web Content Accessibility Guidelines, 웹 접근성 국제 표준 |
| **ARIA** | Accessible Rich Internet Applications, 스크린리더 지원 HTML 속성 |
| **Screen Reader** | 시각장애인을 위한 화면 읽기 프로그램 (NVDA, VoiceOver) |

### 기술 용어

| 용어 | 설명 |
|------|------|
| **pnpm** | 빠르고 효율적인 Node.js 패키지 매니저 |
| **Turborepo** | 모노레포용 빌드 시스템, 캐싱으로 빌드 속도 향상 |
| **Virtual Scroll** | 화면에 보이는 항목만 렌더링하여 대량 데이터 효율적 표시 |
| **SSR/SSG** | Server-Side Rendering / Static Site Generation |

---

## 부록: 문서 이력

| 버전 | 날짜 | 변경 내용 |
|------|------|----------|
| 1.0 | 2025-12-01 | 최초 작성 |
| 2.0 | 2025-12-19 | Micro Frontend, 멀티 테넌트, 소셜 로그인, 2025 준수사항 추가 |
