# ============================================================================
# docker-compose.yml
# í”„ë¡œì íŠ¸: ê³µê³µê¸°ê´€ ERP SaaS
# ê²½ë¡œ: d:/app/docker-compose.yml
# ì‘ì„±ì¼: 2025-12-19
# ============================================================================
#
# [ğŸ“„ íŒŒì¼ ì„¤ëª…]
# ëª¨ë“  ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¥¼ Docker Composeë¡œ í•œ ë²ˆì— ì‹¤í–‰í•©ë‹ˆë‹¤.
#
# [ğŸš€ ì‹¤í–‰ ëª…ë ¹]
# docker-compose up -d        # ì „ì²´ ì„œë¹„ìŠ¤ ì‹œì‘
# docker-compose down         # ì „ì²´ ì„œë¹„ìŠ¤ ì¤‘ì§€
# docker-compose logs -f      # ë¡œê·¸ í™•ì¸
# ============================================================================

version: '3.8'

services:
  # â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  # Shell App (ë©”ì¸ ì»¨í…Œì´ë„ˆ)
  # â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  shell:
    build:
      context: ./apps/shell
      dockerfile: Dockerfile
    ports:
      - "3000:3000"
    environment:
      - NEXT_PUBLIC_API_URL=http://api-gateway:8080
    depends_on:
      - auth-web
      - hrm-web
      - payroll-web
    networks:
      - erp-network

  # â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  # auth-web (ì¸ì¦)
  # â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  auth-web:
    build:
      context: ./services/auth/web
      dockerfile: Dockerfile
    ports:
      - "3001:3001"
    environment:
      - NEXT_PUBLIC_API_URL=http://api-gateway:8080
      - NEXTAUTH_URL=http://localhost:3001
      - NEXTAUTH_SECRET=your-secret-key
    networks:
      - erp-network

  # â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  # hrm-web (ì¸ì‚¬ê´€ë¦¬)
  # â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  hrm-web:
    build:
      context: ./services/hrm/web
      dockerfile: Dockerfile
    ports:
      - "3010:3010"
    environment:
      - NEXT_PUBLIC_API_URL=http://api-gateway:8080
    networks:
      - erp-network

  # â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  # payroll-web (ê¸‰ì—¬ê´€ë¦¬)
  # â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  payroll-web:
    build:
      context: ./services/payroll/web
      dockerfile: Dockerfile
    ports:
      - "3011:3011"
    environment:
      - NEXT_PUBLIC_API_URL=http://api-gateway:8080
    networks:
      - erp-network

networks:
  erp-network:
    driver: bridge
