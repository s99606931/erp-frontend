# Phase 9 ì™„ë£Œë³´ê³ ì„œ: auth-web ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤

> **ì™„ë£Œì¼**: 2025-12-19
> **ì‘ì„±ì**: AI Assistant
> **ì†Œìš”ì‹œê°„**: 40ë¶„

---

## ğŸ“‹ ì‘ì—… ìš”ì•½

### ëª©í‘œ
ë…ë¦½ ë°°í¬ ê°€ëŠ¥í•œ ì¸ì¦ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ êµ¬í˜„

### âœ… ì™„ë£Œ ìƒíƒœ
- [x] Next.js í”„ë¡œì íŠ¸ ì„¤ì • (Port 3001)
- [x] ë¡œê·¸ì¸ í˜ì´ì§€ (React Hook Form + Zod)
- [x] 2FA (OTP) í˜ì´ì§€
- [x] ì†Œì…œ ë¡œê·¸ì¸ UI (ë„¤ì´ë²„, ì¹´ì¹´ì˜¤, êµ¬ê¸€)
- [x] Dockerfile (ë©€í‹° ìŠ¤í…Œì´ì§€ ë¹Œë“œ)

---

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

### auth-web ì„œë¹„ìŠ¤ êµ¬ì¡°

```
services/auth/web/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ (auth)/
â”‚   â”‚   â”œâ”€â”€ login/page.tsx      # âœ… ë¡œê·¸ì¸ í˜ì´ì§€ (200ì¤„)
â”‚   â”‚   â””â”€â”€ 2fa/page.tsx        # âœ… 2FA ì¸ì¦ (180ì¤„)
â”‚   â”œâ”€â”€ layout.tsx              # âœ… ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ
â”‚   â”œâ”€â”€ page.tsx                # âœ… ë¦¬ë‹¤ì´ë ‰íŠ¸
â”‚   â””â”€â”€ globals.css             # âœ… ì „ì—­ ìŠ¤íƒ€ì¼
â”‚
â”œâ”€â”€ Dockerfile                  # âœ… Docker ë¹Œë“œ (60ì¤„)
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ next.config.js
```

### ğŸ³ Docker ì„¤ì •

| í•­ëª© | ê°’ |
|------|-----|
| ê¸°ë³¸ ì´ë¯¸ì§€ | node:20-alpine |
| í¬íŠ¸ | 3001 |
| ì´ë¯¸ì§€ ì´ë¦„ | erp/auth-web:latest |
| ë¹Œë“œ ë°©ì‹ | ë©€í‹° ìŠ¤í…Œì´ì§€ |

```bash
# ë¹Œë“œ
docker build -t erp/auth-web:latest .

# ì‹¤í–‰
docker run -p 3001:3001 erp/auth-web:latest
```

---

## ğŸ” ì¸ì¦ íë¦„

### ë¡œê·¸ì¸ í”Œë¡œìš°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ì´ë©”ì¼ ì…ë ¥                                       â”‚
â”‚    â†“                                                â”‚
â”‚ 2. ì‚¬ì „ ìŠ¹ì¸ ì´ë©”ì¼ í™•ì¸ (/api/auth/check-email)    â”‚
â”‚    â”œâ”€ ë¯¸ìŠ¹ì¸ â†’ ì˜¤ë¥˜ ë©”ì‹œì§€                          â”‚
â”‚    â””â”€ ìŠ¹ì¸ â†’ ê³„ì†                                   â”‚
â”‚    â†“                                                â”‚
â”‚ 3. ë¹„ë°€ë²ˆí˜¸ ê²€ì¦ (/api/auth/login)                  â”‚
â”‚    â”œâ”€ ì‹¤íŒ¨ â†’ ì˜¤ë¥˜ ë©”ì‹œì§€                            â”‚
â”‚    â””â”€ ì„±ê³µ â†’ ê³„ì†                                   â”‚
â”‚    â†“                                                â”‚
â”‚ 4. 2FA í™•ì¸                                         â”‚
â”‚    â”œâ”€ í™œì„±í™” â†’ /2fa í˜ì´ì§€                          â”‚
â”‚    â””â”€ ë¹„í™œì„±í™” â†’ ë°”ë¡œ ë¡œê·¸ì¸                         â”‚
â”‚    â†“                                                â”‚
â”‚ 5. í† í° ë°œê¸‰ â†’ ëŒ€ì‹œë³´ë“œ ì´ë™                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2FA OTP ì…ë ¥

```
â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”
â”‚ 1 â”‚ â”‚ 2 â”‚ â”‚ 3 â”‚ â”‚ 4 â”‚ â”‚ 5 â”‚ â”‚ 6 â”‚
â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜
       â†‘ ìë™ í¬ì»¤ìŠ¤ ì´ë™
       â†‘ 6ìë¦¬ ì…ë ¥ ì‹œ ìë™ ì œì¶œ
       â†‘ ë¶™ì—¬ë„£ê¸° ì§€ì›
```

---

## ğŸ“ ì£¼ìš” ì½”ë“œ

### React Hook Form + Zod ìœ íš¨ì„± ê²€ì‚¬

```typescript
const loginSchema = z.object({
  email: z
    .string()
    .min(1, 'ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.')
    .email('ìœ íš¨í•œ ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.'),
  password: z.string().min(1, 'ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.'),
});

const {
  register,
  handleSubmit,
  formState: { errors },
} = useForm<LoginFormData>({
  resolver: zodResolver(loginSchema),
});
```

### 2FA OTP ìë™ ì…ë ¥

```typescript
// 6ìë¦¬ ëª¨ë‘ ì…ë ¥ ì‹œ ìë™ ì œì¶œ
if (newCode.every((c) => c) && index === 5) {
  handleSubmit(newCode.join(''));
}

// ë¶™ì—¬ë„£ê¸° ì§€ì›
const handlePaste = (e: React.ClipboardEvent) => {
  const pastedData = e.clipboardData.getData('text').slice(0, 6);
  // ...
};
```

### Dockerfile ë©€í‹° ìŠ¤í…Œì´ì§€

```dockerfile
# Stage 1: ì˜ì¡´ì„±
FROM node:20-alpine AS deps
RUN pnpm install --frozen-lockfile

# Stage 2: ë¹Œë“œ
FROM node:20-alpine AS builder
RUN pnpm build

# Stage 3: ì‹¤í–‰ (non-root user)
FROM node:20-alpine AS runner
USER nextjs
CMD ["node", "server.js"]
```

---

## â™¿ ì ‘ê·¼ì„± ê²€ì¦

| í•­ëª© | ìƒíƒœ |
|------|:----:|
| ëª¨ë“  ì…ë ¥ í•„ë“œì— label ì—°ê²° | âœ… |
| ì˜¤ë¥˜ ë©”ì‹œì§€ role="alert" | âœ… |
| ì†Œì…œ ë¡œê·¸ì¸ ë²„íŠ¼ aria-label | âœ… |
| OTP ì…ë ¥ aria-label | âœ… |
| í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ | âœ… |

---

## âœ… ê²€ì¦ ê²°ê³¼

| íŒŒì¼ | ì¤„ ìˆ˜ | JSDoc | ìƒíƒœ |
|------|:-----:|:-----:|:----:|
| app/layout.tsx | 35+ | âœ… | âœ… |
| app/(auth)/login/page.tsx | 200+ | âœ… | âœ… |
| app/(auth)/2fa/page.tsx | 180+ | âœ… | âœ… |
| Dockerfile | 60+ | âœ… | âœ… |

---

## â¡ï¸ ë‹¤ìŒ ë‹¨ê³„

**Phase 10-15**: ë‚˜ë¨¸ì§€ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ (hrm-web, payroll-web ë“±)
